/*
ChocolateChip.js
Copyright 2014 Sourcebits www.sourcebits.com
License: MIT
Version: 3.8.0
*/
!function(){"use strict";var t=function(t){return"string"==typeof t?[]:t&&t.length&&void 0===t[0]?[]:t&&t.length?t:[]},e=function(t,n){var i=/^#([\w-]*)$/,r=/^\.([\w-]+)$/,s=/^[\w-]+$/,o=function(t){var e=document.getElementById(t.split("#")[1]);return e?[e]:[]},a=function(t,e){return[].slice.apply(e?e.getElementsByTagName(t):document.getElementsByTagName(t))},u=function(t,e){return[].slice.apply(e?e.getElementsByClassName(t.split(".")[1]):document.getElementsByClassName(t.split(".")[1]))},c=function(t,e){return"string"==typeof t&&(t=t.trim()),"string"==typeof t&&i.test(t)?o(t):t&&t instanceof Array&&t.length?t:e||"string"!=typeof t?[].slice.apply(e?e.querySelectorAll(t):document.querySelectorAll(t)):s.test(t)?a(t):r.test(t)?u(t):[].slice.apply(document.querySelectorAll(t))};if("undefined"==typeof t||t===document)return[document];if(null===t)return[];if(n){if("string"==typeof n)return[].slice.apply(document.querySelectorAll(n+" "+t));if(1===n.nodeType)return c(t,n)}else if("function"==typeof t)e.ready(function(){return t.call(t)});else{if(t&&1===t.nodeType)return[t];if("string"==typeof t){if(""===t)return[];if(/<\/?[^>]+>/.test(t))return e.make(t);try{return c(t)?c(t):[]}catch(h){return[]}}else{if(t instanceof Array)return t;if(/NodeListConstructor/i.test(t.constructor.toString()))return[].slice.apply(t);if(t===window)return[]}}return this};e.extend=function(t,n,i){return i=i||!1,n||(n=t,t=e),Object.keys(n).forEach(function(e){n.hasOwnProperty(e)&&Object.defineProperty(t,e,{value:n[e],writable:!0,enumerable:i,configurable:!0})}),this},e.extend({version:"3.8.0",libraryName:"ChocolateChip",slice:Array.prototype.slice,make:function(t){var n=[],i=document.createElement("div");return i.innerHTML=t,i=e.slice.apply(i.childNodes),i.forEach(function(t){1===t.nodeType?n.push(t):3===t.nodeType&&0!==t.nodeValue.trim().length&&n.push(t)}),n},html:function(t){return this.make(t)},replace:function(t,e){t&&e&&(t=t.length?t[0]:t,e=e.length?e[0]:e,e.parentNode.replaceChild(t,e))},require:function(t,n){n=n||e.noop;var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("src",t),i.onload=i.onreadystatechange=function(){i.readyState&&"complete"!==i.readyState||n.apply(n,arguments)},e("head").insert(i,"last")},processJSON:function(t,n){n=null!==n||void 0!==n?"var "+n+" = ":"var data = ";var i=document.createElement("script");i.setAttribute("type","text/javascript");var r="_"+e.uuidNum();i.setAttribute("id",r),i.html(n+t),e("head").append(i),e.defer(function(){var t="#"+r;e(t).remove()})},delay:function(t,n){t=t||e.noop,setTimeout(function(){t.call(t)},n)},defer:function(t){return t=t||e.noop,e.delay.apply(e,[t,1].concat(e.slice.call(arguments,1)))},noop:function(){},concat:function(t){return t instanceof Array?t.join(""):t instanceof Object?void 0:(t=e.slice.apply(arguments),String.prototype.concat.apply(t.join("")))},w:function(t){return t.split(" ")},isString:function(t){return"string"==typeof t},isArray:function(t){return Array.isArray(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},isEmptyObject:function(t){return 0===Object.keys(t).length},isNumber:function(t){return"number"==typeof t},isInteger:function(t){return"number"==typeof t&&t%1===0},isFloat:function(t){return"number"==typeof t&&t%1!==0},uuidNum:function(){return Math.floor(4294967296*(1+Math.random()))},makeUuid:function(){return e.concat("chch_",e.uuid)},uuid:0,chch_cache:{},fn:{}}),e.fn.extend=function(t){return e.extend(Array.prototype,t)},e.uuid=e.uuidNum(),e.chch_cache.data={},e.chch_cache.events={},e.extend(e.chch_cache.events,{keys:[],values:[],set:function(t,n,i,r){var s,o,a=this.values.length>0?this.values.length-1:0;t.id?s=t.id:(++e.uuid,s=e.makeUuid(),t.setAttribute("id",s)),this.keys.indexOf(s)>=0?(this.values[a].push([]),o=this.values[a],o.push(n),o.push(i),o.push(r),t.addEventListener(n,i,r)):(this.keys.push(s),this.values.push([]),a=this.values.length-1,this.values[a].push([]),o=this.values[a],o[0].push(n),o[0].push(i),o[0].push(r),t.addEventListener(n,i,r))},hasKey:function(t){return this.keys.indexOf(t)>=0?!0:!1},_delete:function(t,n,i){var r=this,s=this.keys.indexOf(t),o=this.values;t&&("undefined"==typeof n&&(o[s].each(function(n){document.getElementById(t).removeEventListener(n[0],n[1],n[2]),e.chch_cache.events.keys.splice(s,1),o[s].splice(s,1)}),o.splice(s,1)),n&&i&&o[s].each(function(i){i[0]===n&&(document.getElementById(t).removeEventListener(i[0],i[1],i[2]),e.chch_cache.events.values.splice(s,1),e.chch_cache.events.keys.splice(s,1))}),n&&"undefined"==typeof i&&r.values[s].each(function(i){i[0]===n&&(document.getElementById(t).removeEventListener(i[0],i[1],i[2]),e.chch_cache.events.values.splice(s,1),e.chch_cache.events.keys.splice(s,1))}))}}),e.fn.extend({each:function(t,e){if(!this.length)return[];if("function"==typeof t){var n,i=this.length;for(e=arguments[1],n=0;i>n;n++)n in this&&this.hasOwnProperty(n)&&t.call(e,this[n],n,this);return this}},unique:function(){var t=[],e=this.sort();return e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t.length?t:[]},eq:function(t){return this.length?(t=parseInt(t,10),this.length<t+1?[]:0>t?this[this.length+t]?[this[this.length+t]]:[]:0===t||t?[this[t]]:[]):[]},index:function(t){if(!this.length)return[];var n;return t?this.indexOf(t instanceof Array?t[0]:1===t.nodeType?t:t):(n=e(this[0]),n.parent().children().indexOf(n[0]))},is:function(t){if(!this.length||!t)return[];if(!this.length)return[];var n,i=[],r=function(t,i){if(n=this,"string"==typeof i){if([].slice.apply(t.parentNode.querySelectorAll(i)).indexOf(t)>=0)return t}else if("function"==typeof i){if(i.call(n))return t}else if(i&&i.length){if(-1!==e.slice.apply(i).indexOf(t))return t}else{if(1!==i.nodeType)return[];if(t===i)return t}};return this.each(function(e){r(e,t)&&i.push(e)}),i.length?i:[]},isnt:function(t){if(!this.length)return[];var n,i=[],r=function(t,i){if(n=this,"string"==typeof i){if(-1===[].slice.apply(t.parentNode.querySelectorAll(i)).indexOf(t))return t}else if("function"==typeof i){if(i.call(n))return t}else if(i.length){if(-1===e.slice.apply(i).indexOf(t))return t}else{if(1!==i.nodeType)return[];if(t!==i)return t}};return this.each(function(e){r(e,t)&&i.push(e)}),i.length?i:[]},has:function(t){if(!this.length)return[];var n=[],i=function(t,n){if("string"==typeof n){if(t.querySelector(n))return t}else{if(1!==n.nodeType)return!1;if(e.slice.apply(this.children).indexOf(n))return t}};return this.each(function(e){i(e,t)&&n.push(e)}),n.length?n:[]},hasnt:function(t){if(!this.length)return[];var n=[];return this.each(function(i){"string"==typeof t?i.querySelector(t)||n.push(i):1===t.nodeType&&(e.slice.apply(i.children).indexOf(t)||n.push(i))}),n.length?n:[]},find:function(t,n){var i=[];return this.length?(n?n.each(function(){e.slice.apply(n.querySelectorAll(t)).each(function(t){i.push(t)})}):this.each(function(n){e.slice.apply(n.querySelectorAll(t)).each(function(t){i.push(t)})}),i):i},css:function(t,n){if(!this.length)return[];var i=[];if(!t)return[];if(!n&&t instanceof Object){if(!this.length)return;this.each(function(n){for(var r in t)t.hasOwnProperty(r)&&(n.style[e.camelize(r)]=t[r]);i.push(n)})}else{if(!n&&"string"==typeof t){if(!this.length)return;return document.defaultView.getComputedStyle(this[0],null).getPropertyValue(t.toLowerCase())}if(n){if(!this.length)return[];this.each(function(r){r.style[e.camelize(t)]=n,i.push(r)})}}return i.length?i:[]},width:function(){return this.length?this.eq(0)[0].clientWidth:void 0},height:function(){return this.length?this.eq(0)[0].clientHeight:void 0},offset:function(){if(this.length){var t=this.eq(0)[0].getBoundingClientRect();return{top:Math.round(t.top),left:Math.round(t.left),bottom:Math.round(t.bottom),right:Math.round(t.right)}}},prependTo:function(t){return this.length?(this.reverse(),this.each(function(n){e(t)[0].insertBefore(n,e(t)[0].firstChild)}),this):[]},appendTo:function(t){return this.length?(this.each(function(n){e(t).append(n)}),this):[]},before:function(t){if(!this.length)return[];var n=function(t,n){if("string"==typeof n&&(n=e.make(n)),n&&n.constructor===Array)for(var i=n.length,r=0;i>r;)t.insertAdjacentElement("beforeBegin",n[r]),r++;else n&&1===n.nodeType&&t.insertAdjacentElement("beforeBegin",n);return t};return this.each(function(e){n(e,t)}),this},after:function(t){if(!this.length)return[];var n=function(t,n){var i=t.parentNode;if("string"==typeof n&&(n=e.make(n)),n&&n.constructor===Array)for(var r=0,s=n.length;s>r;)t===i.lastChild?i.appendChild(n[r]):i.insertBefore(n[r],t.nextSibling),r++;else n&&1===n.nodeType&&i.appendChild(n);return this};return this.each(function(e){n(e,t)}),this},text:function(t){if(!this.length)return[];var e="",n=function(t,e){return e||0===e?(t.innerText=e,t):t.innerText};return this.each(function(i){t?n(i,t):e+=n(i)}),t?this:e},insert:function(t,n){if(!this.length)return[];var i=function(t,n,i){t instanceof Array&&(t=t[0]);var r=[];"string"==typeof n?r=e.make(n):n&&1===n.nodeType?r.push(n):n instanceof Array&&(r=n);var s=0,o=r.length;if(!i||i>t.children.length+1||"last"===i)for(;o>s;)t.appendChild(r[s]),s++;else if(1===i||"first"===i){if(t.children)if(t.firstElementChild)for(;o>s;)t.insertBefore(r[s],t.firstChild),s++;else for(;o>s;)t.insertBefore(r[s],t.firstChild),s++}else for(;o>s;)t.insertBefore(r[s],t.childNodes[i]),s++;return t},r=t;return"string"==typeof r?this.each(function(e){i(e,t,n)}):r instanceof Array?this.each(function(t){(1===n||"first"===n)&&(r=r.reverse()),r.each(function(e){i(t,e,n)})}):1===r.nodeType&&this.each(function(t){i(t,r,n)}),this},html:function(t){if(!this.length)return[];var e=[],n=function(t,n){""===n?(t.innerHTML="",e.push(t)):n?(t.innerHTML=n,e.push(t)):n||(e=t.innerHTML)};return this.each(function(e){n(e,t)}),e.length?e:[]},prepend:function(t){return this.length?(this.insert(t,"first"),this):[]},append:function(t){return this.length?(this.insert(t,"last"),this):[]},attr:function(t,e){if(!this.length)return[];var n=[],i=function(t,e,n){return n?t.setAttribute(e,n):t.getAttribute(e)};if(e)this.each(function(r){i(r,t,e),n.push(r)});else if(this[0].hasAttribute(t))return this[0].getAttribute(t);return n.length?n:void 0},prop:function(t,e){return this.length?this.attr(t,e):[]},hasAttr:function(e){if(!this.length)return[];var n=[];return this.each(function(t){t.hasAttribute(e)&&n.push(t)}),t(n)},removeAttr:function(e){if(!this.length)return[];var n=[];return this.each(function(t){t.hasAttribute(e)&&(t.removeAttribute(e),n.push(t))}),t(n)},hasClass:function(e){if(!this.length)return[];var n=[],i=[];return/\s/.test(e)&&(i=e.split(" ")),this.each(function(t){i.length?(i.forEach(function(e){t&&t.classList&&t.classList.contains(e)&&n.push(t)}),n=n.unique()):t&&t.classList&&t.classList.contains(e)&&n.push(t)}),t(n)},addClass:function(e){if(!this.length)return[];if("string"==typeof e){var n,i=[];return this.each(function(t){/\s/.test(e)?(n=e.split(" "),n.each(function(e){t.classList.add(e)})):t.classList.add(e),i.push(t)}),t(i)}},removeClass:function(e){if(!this.length)return[];var n,i=[];return this.each(function(t){t&&(/\s/.test(e)?(n=e.split(" "),n.each(function(e){t.classList.remove(e)})):t.classList.remove(e),""===t.getAttribute("class")&&t.removeAttribute("class"),i.push(t))}),t(i)},toggleClass:function(e){if(!this.length)return[];var n=[];return this.each(function(t){t.classList.toggle(e),n.push(t)}),t(n)},dataset:function(n,i){if(!this.length)return[];var r=[];return"string"==typeof i&&i.length>=0?(this.each(function(t){t.dataset[n]=i,r.push(t)}),t(r)):this[0].dataset[e.camelize(n)]},val:function(t){return this.length?"string"==typeof t?(this[0].value=t,this):this[0]&&this[0].value?this[0].value:void 0:[]},disable:function(){if(!this.length)return[];var e=[];return this.each(function(t){t.classList.add("disabled"),t.setAttribute("disabled",!0),t.style.cursor="default"}),t(e)},enable:function(){if(!this.length)return[];var e=[];return this.each(function(t){t.classList.remove("disabled"),t.removeAttribute("disabled"),t.style.cursor="auto"}),t(e)},hide:function(n,i){if(!this.length)return[];var r=i||e.noop;if(!this.length)return[];{var s=[],o="",a={},u={opacity:0,height:0,padding:0};e.isWebkit?"-webkit-transition":"transition"}return this.each(function(t){a.padding=e(t).css("padding"),a.height=e(t).css("height"),a.opacity=e(t).css("opacity"),a.display=e(t).css("display"),e(t).data("ui-dimensions",a),"string"==typeof n?"slow"===n?(e(t).css({transition:"all 1s ease-out"}),e(t).css(u),setTimeout(function(){e(t).css({visibility:"hidden",display:"none"}),r.apply(t,arguments)},1e3)):"fast"===n&&(e(t).css({transition:"all .35s ease-in-out"}),e(t).css(u),setTimeout(function(){e(t).css({visibility:"hidden",display:"none"}),r.apply(t,arguments)},350)):"number"==typeof n&&(o="all "+n+"ms ease-in-out",e(t).css({transition:o}),e(t).css(u),setTimeout(function(){e(t).css({visibility:"hidden",display:"none"}),r.apply(t,arguments)},n)),i||"function"!=typeof n||(e(t).css({display:"none",visibility:"hidden"}),n.apply(t,arguments)),n||(e(t).data("",""),e(t).css({display:"none",visibility:"hidden"})),s.push(t)}),t(s)},show:function(t,n){if(!this.length)return[];{var i=n||e.noop,r=function(t,e,n){return{opacity:t,height:e,padding:n}};e.isWebkit?"-webkit-transition":"transition"}this.each(function(n){var s=e(n).data("ui-dimensions"),o=s&&s.height||"auto",a=s&&s.padding||"auto",u=s&&s.opacity||1,c=s&&s.display||"block";"string"==typeof t?"slow"===t?(e(n).css({visibility:"visible",display:c}),setTimeout(function(){e(n).css({transition:"all 1s ease-out"}),e(n).css(r(u,o,a)),setTimeout(function(){i.apply(n,arguments)},1e3)})):"fast"===t&&(e(n).css({visibility:"visible",display:c}),setTimeout(function(){e(n).css({transition:"all .250s ease-out"}),e(n).css(r(u,o,a)),setTimeout(function(){i.apply(n,arguments)},250)})):"number"==typeof t&&(e(n).css({visibility:"visible",display:c}),setTimeout(function(){e(n).css({transition:"all "+t+"ms ease-out"}),e(n).css(r(u,o,a)),setTimeout(function(){i.apply(n,arguments)},t)})),t||e(n).css({display:c,visibility:"visible",opacity:u})})},prev:function(){if(!this.length)return[];var t=[];return this.each(function(e){e.previousElementSibling&&t.push(e.previousElementSibling)}),t},next:function(){if(!this.length)return[];var t=[];return this.each(function(e){e.nextElementSibling&&t.push(e.nextElementSibling)}),t},first:function(){if(!this.length)return[];var t=[];return this.each(function(e){e.firstElementChild&&t.push(e.firstElementChild)}),t},last:function(){if(!this.length)return[];var t=[];return this.each(function(e){e.lastElementChild&&t.push(e.lastElementChild)}),t},children:function(t){if(!this.length)return[];var e=[];return t?this.forEach(function(n){[].slice.apply(n.children).forEach(function(n){[n].is(t)[0]&&e.push(n)})}):this.each(function(t){[].slice.apply(t.children).forEach(function(t){e.push(t)})}),e},parent:function(){if(!this.length)return[];var e=[];return this.each(function(t){e.push(t.parentNode)}),e=e.unique(),t(e)},ancestor:function(t){if(!this.length)return[];var n=[];if("undefined"==typeof t)return[];var i=this[0],r=null,s=null,o=i.parentNode;if(!o)return[];if("string"==typeof t&&t.trim(),"number"==typeof t){r=t||1;for(var a=1;r>a;a++){if("HTML"===o.nodeName)return o;null!==o&&(o=o.parentNode)}n.push(o)}else"string"==typeof t&&"."===t.substr(0,1)?(s=t.split(".")[1],"BODY"===o.nodeName&&n.push(o),n.push(o.classList.contains(s)?o:e(o).ancestor(t)[0])):"string"==typeof t&&"#"===t.substr(0,1)?(s=t.split("#")[1],n.push(o.getAttribute("id")===s?o:e(o).ancestor(t)[0])):n.push(o.tagName&&o.tagName.toLowerCase()===t?o:e(o).ancestor(t)[0]);return n},closest:function(t){return this.ancestor(t)},siblings:function(t){if(!this.length)return[];var n,i=[];return t=t&&"string"==typeof t?t:!1,this.each(function(r){n=e(r).parent().children(),n.splice(n.indexOf(r),1),n.each(t?function(e){e.nodeName===t.toUpperCase()&&i.push(e)}:function(t){i.push(t)})}),i.length?i.unique():this},bind:function(t,n,i){return this.length?(i=i||!1,this.each(function(r){e.chch_cache.events.set(r,t,n,i)}),this):[]},unbind:function(t,n,i){if(!this.length)return[];var r;return this.each(function(s){return s.id&&e.chch_cache.events.hasKey(s.id)?(i=i||!1,r=s.getAttribute("id"),void e.chch_cache.events._delete(r,t,n,i)):this}),this},trigger:function(t){return this.length?void this.each(function(e){if(document.createEvent){var n=document.createEvent("Events");n.initEvent(t,!0,!1),e.dispatchEvent(n)}}):[]},delegate:function(t,n,i,r){return this.length?(r=r||!1,void this.each(function(s){s.addEventListener(n,function(n){var r=n.target;3===n.target.nodeType&&(r=n.target.parentNode),e(t,s).each(function(s){if(s===r)i.call(s,n);else try{var o=e(r).ancestor(t);s===o[0]&&i.call(s,n)}catch(a){}})},r)})):[]},undelegate:function(t,n,i,r){return this.length?void this.each(function(t){e(t).unbind(n,i,r)}):[]},on:function(t,n,i,r){if(!this.length)return[];!n&&/Object/gim.test(t.constructor.toString())&&this.each(function(n){for(var i in t)t.hasOwnProperty(i)&&e(n).on(i,t[i])});var s,o=[];return"string"==typeof t&&(t=t.trim(),/\s/.test(t)&&(s=t.split(" "),s.length&&this.each(function(t){s.each(function(s){"function"==typeof n?(e(t).bind(s,n,i),o.push(t)):(e(t).delegate(n,s,i,r),o.push(t))})}))),this.each(function(s){"function"==typeof n?(e(s).bind(t,n,i),o.push(s)):(e(s).delegate(n,t,i,r),o.push(s))}),o.length?o:this},off:function(t,n,i,r){if(!this.length)return[];var s=[];return this.each(function(o){"function"!=typeof n&&n?(e(o).undelegate(n,t,i,r),s.push(o)):(e(o).unbind(t,n,i),s.push(o))}),s.length?s:this},animate:function(t){if(!this.length)return[];var n,i,r=null,s=s||".5s",o=o||"linear",a={};return"ontransitionend"in window?(n="transition",i="transitionend"):(n="-webkit-transition",i="webkitTransitionEnd"),a[n]="all "+s+" "+o,this.forEach(function(n){for(var s in t)"onEnd"===s?(r=t[s],e(n).bind(i,r())):a[s]=t[s];e(n).css(a)}),this},data:function(t,n){if(!this.length)return[];var i,r=this[0];if(i=r.id,"undefined"!==t&&null!==t){if(n||0===n){var s=n;r.id?(i=r.id,e.chch_cache.data[i]?e.chch_cache.data[i][t]=s:(e.chch_cache.data[i]={},e.chch_cache.data[i][t]=s)):(++e.uuid,i=e.makeUuid(),r.setAttribute("id",i),e.chch_cache.data[i]={},e.chch_cache.data[i][t]=s)}else if(t&&i){if(!e.chch_cache.data[i])return;if(0===e.chch_cache.data[i][t])return e.chch_cache.data[i][t];if(!e.chch_cache.data[i][t])return;return e.chch_cache.data[i][t]}return this}},removeData:function(t){return this.length?void this.each(function(n){var i=n.getAttribute("id");if(i)return e.chch_cache.data[n.id]?t?(0===Object.keys(e.chch_cache.data[i]).length?delete e.chch_cache.data[i]:delete e.chch_cache.data[i][t],this):(delete e.chch_cache.data[i],this):this}):[]},clone:function(t){if(!this.length)return[];var e=[];return this.each(function(n){e.push(t!==!0&&t?n.cloneNode(!1):n.cloneNode(!0))}),e.length?e[0]:this},wrap:function(t){return this.length?(this.each(function(n){var i=e.make(t);i=i[0];var r=e(n).clone(!0);i.appendChild(r),n.parentNode.insertBefore(i,n.nextSibling),e(n).remove(n)}),this):[]},unwrap:function(){if(!this.length)return[];var t=null;return this.each(function(n){return n.parentNode!==t?(t=n.parentNode,"BODY"===n.parentNode.nodeName?!1:void e.replace(n,n.parentNode)):void 0}),this},remove:function(){return this.length?void this.each(function(t){e(t).unbind(),e(t).removeData(),t.parentNode.removeChild(t)}):[]},empty:function(){if(!this.length)return[];var n=[];return this.each(function(t){e(t).unbind(),t.textContent="",n.push(t)}),t(n)},ready:function(t){return this.length?void e.ready(function(){return t.call(t)}):[]}}),e.extend(e,{DOMReadyList:[],executeWhenDOMReady:function(){for(var t=e.DOMReadyList.length,n=0;t>n;)e.DOMReadyList[n](),n++;e.DOMReadyList=[],document.removeEventListener("DOMContentLoaded",e.executeWhenDOMReady,!1)},ready:function(t){document.getElementsByTagName("body")[0]?t():(0===e.DOMReadyList.length&&document.addEventListener("DOMContentLoaded",e.executeWhenDOMReady,!1),e.DOMReadyList.push(t))}}),e.extend(e,{camelize:function(t){return"string"==typeof t?t.replace(/\-(.)/g,function(t,e){return e.toUpperCase()}):void 0},deCamelize:function(t){return"string"==typeof t?t.replace(/([A-Z])/g,"-$1").toLowerCase():void 0},capitalize:function(t,n){if(t&&"string"==typeof t){if(n){var i=t.split(" "),r=[];return i.each(function(t){r.push(e.capitalize(t))}),r.join(" ")}return t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()}}}),e.extend(e,{form2JSON:function(t,n){function i(t){for(var e=[],n=t.firstChild;n;){if(n.nodeName.match(/INPUT|SELECT|TEXTAREA/i))e.push({name:n.name,value:r(n)});else{var s=i(n);e=e.concat(s)}n=n.nextSibling}return e}function r(t){if("INPUT"===t.nodeName){if("radio"===t.type.toLowerCase()||"checkbox"===t.type.toLowerCase()){if(t.checked)return t.value}else if(!t.type.toLowerCase().match(/button|reset|submit|image/i))return t.value}else{if("TEXTAREA"===t.nodeName)return t.value;if("SELECT"===t.nodeName)return s(t)}return""}function s(t){var n=t.multiple;if(!n)return t.value;if(t.selectedIndex>-1){var i=[];return e("option",t).each(function(t){t.selected&&i.push(t.value)}),i}}t="string"==typeof t?e(t)[0]:t,n=n||".";var o=i(t),a={},u={};return o.each(function(t){var e=t.value;if(""!==e)for(var i=t.name,r=i.split(n),s=a,o=0;o<r.length;o++){var c,h=r[o];if(h.indexOf("[]")>-1&&o===r.length-1)c=h.substr(0,h.indexOf("[")),s[c]||(s[c]=[]),s[c].push(e);else if(h.indexOf("[")>-1){c=h.substr(0,h.indexOf("["));var l=h.replace(/^[a-z]+\[|\]$/gi,"");u[c]||(u[c]={}),s[c]||(s[c]=[]),o===r.length-1?s[c].push(e):u[c][l]||(s[c].push({}),u[c][l]=s[c][s[c].length-1]),s=u[c][l]}else o<r.length-1?(s[h]||(s[h]={}),s=s[h]):s[h]=e}}),a}}),e.extend(e,{ajax:function(t){var n={type:"GET",beforeSend:e.noop,success:e.noop,error:e.noop,context:null,async:!0,timeout:0};e.extend(n,t);{var i={script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",form:"application/x-www-form-urlencoded"},r=new XMLHttpRequest,s=new e.Deferred,o=n.type||"GET",a=n.async||!1,u=n.data||null;t.context||s}if(r.queryString=u,r.timeout=n.timeout?n.timeout:0,r.open(o,n.url,a),n.headers)for(var c in n.headers)n.headers.hasOwnProperty(c)&&r.setRequestHeader(c,n.headers[c]);n.dataType&&r.setRequestHeader("Content-Type",i[n.dataType]),r.handleResp=n.success;var h=function(){0===r.status&&4===r.readyState||r.status>=200&&r.status<300&&4===r.readyState||304===r.status&&4===r.readyState?n.dataType&&"json"===n.dataType?(r.handleResp(JSON.parse(r.responseText)),s.resolve(r.responseText,n.context,r)):(r.handleResp(r.responseText),s.resolve(r.responseText,n.context,r)):r.status>=400&&error&&(error(r),s.reject(r.status,n.context,r))};return a?(n.beforeSend!==e.noop&&n.beforeSend(r,n),r.onreadystatechange=h,r.send(u)):(n.beforeSend!==e.noop&&n.beforeSend(r,n),r.send(u),h()),s},get:function(t,n,i,r){return t?n?(r||(r=null),"function"!=typeof n||i?"string"==typeof n&&"function"==typeof i?e.ajax({url:t,type:"GET",data:n,success:i,dataType:r}):void 0:e.ajax({url:t,type:"GET",success:n})):e.ajax({url:t,type:"GET"}):void 0},getJSON:function(t,n,i){t&&n&&("function"!=typeof n||i?"string"==typeof n&&"function"==typeof i&&e.ajax({url:t,type:"GET",data:n,success:i,dataType:"json"}):e.ajax({url:t,type:"GET",async:!0,success:n,dataType:"json"}))},JSONP:function(t){var n={url:null,callback:e.noop,callbackType:"callback=?",timeout:null};e.extend(n,t);var i=new e.Deferred,r="fn_"+e.uuidNum(),s=document.createElement("script"),o=e("head")[0];s.setAttribute("id",r);var a=new Date;window[r]=function(t){o.removeChild(s),n.callback(t),i.resolve(t,"resolved",n),delete window[r]};var u=n.callbackType.substr(0,n.callbackType.length-1);if(s.src=n.url.replace(n.callbackType,u+r),o.appendChild(s),n.timeout){setTimeout(function(){new Date-a>0&&(i.reject("timedout",n),n.callback=e.noop)},n.timeout)}return i},post:function(t,n,i,r){t&&n&&("function"!=typeof n||r?"string"==typeof n&&"function"==typeof i&&(r||(r="form"),e.ajax({url:t,type:"POST",data:n,success:i,dataType:r})):(r="string"==typeof i?i:"form",e.ajax({url:t,type:"POST",success:n,dataType:r})))}}),e.extend(e,{xhr:function(t){if(!t)throw"No options where provided to xhr request.";if("object"!=typeof t)throw"Expected an object as argument for options, received something else.";var n,i={type:"GET",beforeSend:e.noop,success:e.noop,error:e.noop,context:null,async:!0,timeout:0};t.data&&(t.data=encodeURIComponent(t.data)),e.extend(i,t);var r={script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"};return new Promise(function(t,s){var o=new XMLHttpRequest,a=i.type||"get",u=i.async||!1,c=i.data||null;if(o.queryString=c,o.timeout=i.timeout?i.timeout:0,o.open(a,i.url,u),i.headers)for(var h in i.headers)i.headers.hasOwnProperty(h)&&o.setRequestHeader(h,i.headers[h]);i.dataType&&o.setRequestHeader("Content-Type",r[i.dataType]),n=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,o.onload=function(){200===o.status&&o.status<300&&4===o.readyState||304===o.status&&4===o.readyState||0===o.status&&"file:"===n?t(o.response):s(new Error(o.statusText))},o.onerror=function(){s(new Error("There was a network error."))},u?(i.beforeSend!==e.noop&&i.beforeSend(o,i),o.send(c)):i.beforeSend!==e.noop&&i.beforeSend(o,i)})}}),e.extend(e.xhr,{get:function(t,n,i,r){return t?n?(r||(r=null),"function"!=typeof n||i?"string"==typeof n&&"function"==typeof i?e.xhr({url:t,type:"GET",data:n,success:i,dataType:r}):void 0:e.xhr({url:t,type:"GET",success:n})):e.xhr({url:t,type:"GET"}):void 0},getJSON:function(t,n,i){t&&n&&("function"!=typeof n||i?"string"==typeof n&&"function"==typeof i&&e.xhr({url:t,type:"GET",data:n,success:i,dataType:"json"}):e.xhr({url:t,type:"GET",async:!0,success:n,dataType:"json"}))},JSONP:function(t){var n={url:null,callback:e.noop,callbackType:"callback=?",timeout:null};e.extend(n,t);var i="fn_"+e.uuidNum(),r=document.createElement("script"),s=e("head")[0];r.setAttribute("id",i);var o=new Date;window[i]=function(t){s.removeChild(r),n.callback(t),deferred.resolve(t,"resolved",n),delete window[i]};var a=n.callbackType.substr(0,n.callbackType.length-1);if(r.src=n.url.replace(n.callbackType,a+i),s.appendChild(r),n.timeout){setTimeout(function(){new Date-o>0&&(deferred.reject("timedout",n),n.callback=e.noop)},n.timeout)}return new Promise(function(t,i){var r="fn_"+e.uuidNum(),s=document.createElement("script"),o=e("head")[0];s.setAttribute("id",r);var a=new Date;window[r]=function(e){o.removeChild(s),n.callback(e),t(e),delete window[r]};var u=n.callbackType.substr(0,n.callbackType.length-1);if(s.src=n.url.replace(n.callbackType,u+r),o.appendChild(s),n.timeout){setTimeout(function(){new Date-a>0&&(i("The request timedout."),n.callback=e.noop)},n.timeout)}})},post:function(t,n,i,r){t&&n&&("function"!=typeof n||r?"string"==typeof n&&"function"==typeof i&&(r||(r="form"),e.xhr({url:t,type:"POST",data:n,success:i,dataType:r})):(r="string"==typeof i?i:"form",e.xhr({url:t,type:"POST",success:n,dataType:r})))}}),e.extend(e,{isiPhone:/iphone/gim.test(navigator.userAgent),isiPad:/ipad/gim.test(navigator.userAgent),isiPod:/ipod/gim.test(navigator.userAgent),isiOS:/ip(hone|od|ad)/gim.test(navigator.userAgent),isAndroid:/android/gim.test(navigator.userAgent)&&!/trident/gim.test(navigator.userAgent),isWebOS:/webos/gim.test(navigator.userAgent),isBlackberry:/blackberry/gim.test(navigator.userAgent),isTouchEnabled:"createTouch"in document,isOnline:navigator.onLine,isStandalone:navigator.standalone,isiOS6:navigator.userAgent.match(/OS 6/i),isiOS7:navigator.userAgent.match(/OS 7/i),isWin:/trident/gim.test(navigator.userAgent),isWinPhone:/trident/gim.test(navigator.userAgent)&&/mobile/gim.test(navigator.userAgent),isIE10:navigator.userAgent.match(/msie 10/i),isIE11:navigator.userAgent.match(/msie 11/i),isWebkit:navigator.userAgent.match(/webkit/),isMobile:/mobile/gim.test(navigator.userAgent),isDesktop:!/mobile/gim.test(navigator.userAgent),isSafari:!/Chrome/gim.test(navigator.userAgent)&&/Safari/gim.test(navigator.userAgent)&&!/android/gim.test(navigator.userAgent),isChrome:/Chrome/gim.test(navigator.userAgent),isNativeAndroid:/android/i.test(navigator.userAgent)&&/webkit/i.test(navigator.userAgent)&&!/chrome/i.test(navigator.userAgent)}),e.extend(e,{templates:{},template:function(t,e){var n,i,r;e=e?e:"data",n=/\[\[=([\s\S]+?)\]\]/g,i="[[",r="]]";var s=new Function(e,"var p=[];p.push('"+t.replace(/[\r\t\n]/g," ").split("'").join("\\'").replace(n,"',$1,'").split(i).join("');").split(r).join("p.push('")+"');return p.join('');");return s}}),e.extend(e,{subscriptions:{},subscribe:function(t,n){var i=e.uuidNum();return e.subscriptions[t]||(e.subscriptions[t]=[]),e.subscriptions[t].push({token:i,callback:n}),i},unsubscribe:function(t){setTimeout(function(){for(var n in e.subscriptions)if(e.subscriptions[n])for(var i=0,r=e.subscriptions[n].length;r>i;i++)if(e.subscriptions[n][i].token===t)return e.subscriptions[n].splice(i,1),t;return!1})},publish:function(t,n){return e.subscriptions[t]?void setTimeout(function(){for(var i=e.subscriptions[t]?e.subscriptions[t].length:0;i--;)e.subscriptions[t][i].callback(t,n);return!0}):!1}}),e.extend({Deferred:function(t){var n="pending",i=[],r=[],s=[],o=null,a={done:function(){for(var t=0;t<arguments.length;t++)if(arguments[t])if(Array.isArray(arguments[t]))for(var e=arguments[t],r=0;r<e.length;r++)"resolved"===n&&e[r].apply(this,o),i.push(e[r]);else"resolved"===n&&arguments[t].apply(this,o),i.push(arguments[t]);return this},fail:function(){for(var t=0;t<arguments.length;t++)if(arguments[t])if(Array.isArray(arguments[t]))for(var e=arguments[t],i=0;i<e.length;i++)"rejected"===n&&e[i].apply(this,o),r.push(e[i]);else"rejected"===n&&arguments[t].apply(this,o),r.push(arguments[t]);return this},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},progress:function(){for(var t=0;t<arguments.length;t++)if(arguments[t])if(Array.isArray(arguments[t]))for(var e=arguments[t],i=0;i<e.length;i++)"pending"===n&&s.push(e[i]);else"pending"===n&&s.push(arguments[t]);return this},then:function(){arguments.length>1&&arguments[1]&&this.fail(arguments[1]),arguments.length>0&&arguments[0]&&this.done(arguments[0]),arguments.length>2&&arguments[2]&&this.progress(arguments[2])},promise:function(t){if(null===t||void 0===t)return a;for(var e in a)t[e]=a[e];return t},state:function(){return n},debug:function(){console.log("[debug]",i,r,n)},isRejected:function(){return"rejected"===n},isResolved:function(){return"resolved"===n},pipe:function(t,n){var i=function(t,n){if(e.isArray(t))for(var i=0;i<t.length;i++)n(t[i]);else n(t)};return e.Deferred(function(e){i(t,function(t){u.done("function"==typeof t?function(){var n=t.apply(this,arguments);n&&"function"==typeof n?n.promise().then(e.resolve,e.reject,e.notify):e.resolve(n)}:e.resolve)}),i(n,function(t){u.fail("function"==typeof t?function(){var n=t.apply(this,arguments);n&&"function"==typeof n?n.promise().then(e.resolve,e.reject,e.notify):e.reject(n)}:e.reject)})}).promise()}},u={resolveWith:function(t){if("pending"===n){n="resolved",o=arguments.length>1?arguments[1]:[];for(var e=0;e<i.length;e++)i[e].apply(t,o)}return this},rejectWith:function(t){if("pending"===n){n="rejected",o=arguments.length>1?arguments[1]:[];for(var e=0;e<r.length;e++)r[e].apply(t,o)}return this},notifyWith:function(t){if("pending"===n){o=2<=arguments.length?e.slice.call(arguments,1):[];for(var i=0;i<s.length;i++)s[i].apply(t,o)}return this},resolve:function(){return this.resolveWith(this,arguments)},reject:function(){return this.rejectWith(this,arguments)},notify:function(){return this.notifyWith(this,arguments)}},c=a.promise(u);return t&&t.apply(c,[c]),c}}),e.extend({when:function(){if(arguments.length<2){var t=arguments.length?arguments[0]:void 0;return t&&"function"==typeof t.isResolved&&"function"==typeof t.isRejected?t.promise():e.Deferred().resolve(t).promise()
}return function(t){var n=e.Deferred(),i=t.length,r=0,s=[];s.length=i;for(var o=0;o<t.length;o++)!function(e){t[e].done(function(){s[e]=arguments.length<2?arguments[0]:arguments,++r===i&&n.resolve.apply(n,s)}).fail(function(){n.reject(arguments)})}(o);return n.promise()}(arguments)}}),function(){function t(t,e){f.add(t,e),l||(l=setTimeout(f.unshift))}function e(t){var e,n=typeof t;return null===t||"object"!==n&&"function"!==n||(e=t.then),"function"==typeof e?e:!1}function n(){for(var t=0;t<this.chain.length;t++)i(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function i(t,n,i){var r,s;try{n===!1?i.reject(t.msg):(r=n===!0?t.msg:n.call(void 0,t.msg),r===i.promise?i.reject(new TypeError("Promise-chain cycle")):(s=e(r))?s.call(r,i.resolve,i.reject):i.resolve(r))}catch(o){i.reject(o)}}function r(i){var o,u,c=this;if(!c.triggered){c.triggered=!0,c.deferred&&(c=c.deferred);try{(o=e(i))?(u=new a(c),o.call(i,function(){r.apply(u,arguments)},function(){s.apply(u,arguments)})):(c.msg=i,c.state=1,c.chain.length>0&&t(n,c))}catch(h){s.call(u||new a(c),h)}}}function s(e){var i=this;i.triggered||(i.triggered=!0,i.deferred&&(i=i.deferred),i.msg=e,i.state=2,i.chain.length>0&&t(n,i))}function o(t,e,n,i){for(var r=0;r<e.length;r++)!function(r){t.resolve(e[r]).then(function(t){n(r,t)},i)}(r)}function a(t){this.deferred=t,this.triggered=!1}function u(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function c(e){if("function"!=typeof e)throw new TypeError("Not a function");if(0!==this.isValidPromise)throw new TypeError("Not a promise");this.isValidPromise=1;var i=new u(this);this.then=function(e,r){var s={success:"function"==typeof e?e:!0,failure:"function"==typeof r?r:!1};return s.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw new TypeError("Not a function");s.resolve=t,s.reject=e}),i.chain.push(s),0!==i.state&&t(n,i),s.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){r.call(i,t)},function(t){s.call(i,t)})}catch(o){s.call(i,o)}}var h,l,f;h=function(t,e,n,i){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:i!==!1})},f=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,i;return{add:function(r,s){i=new t(r,s),n?n.next=i:e=i,n=i,i=void 0},unshift:function(){var t=e;for(e=n=l=void 0;t;)t.fn.call(t.self),t=t.next}}}();var p=h({},"constructor",c,!1);return h(c,"prototype",p,!1),h(p,"isValidPromise",0,!1),h(c,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.isValidPromise?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw new TypeError("Not a function");e(t)})}),h(c,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw new TypeError("Not a function");n(t)})}),h(c,"all",function(t){var e=this;return"[object Array]"!==Object.prototype.toString.call(t)?e.reject(new TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw new TypeError("Not a function");var r=t.length,s=new Array(r),a=0;o(e,t,function(t,e){s[t]=e,++a===r&&n(s)},i)})}),h(c,"race",function(t){var e=this;return"[object Array]"!==Object.prototype.toString.call(t)?e.reject(new TypeError("Not an array")):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw new TypeError("Not a function");o(e,t,function(t,e){n(e)},i)})}),"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise?void 0:window.Promise=c}(),window.$chocolatechipjs=e,"undefined"==typeof window.$&&(window.$=e)}();